!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panduan Lengkap Sistem Kehadiran RFID Enterprise</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            border-bottom: 3px solid #007bff;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        .header h1 {
            color: #007bff;
            font-size: 2.5em;
            margin: 0;
        }
        .header .subtitle {
            color: #666;
            font-size: 1.2em;
            margin: 10px 0;
        }
        .version {
            background: #28a745;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
            font-weight: bold;
        }
        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .toc h2 {
            color: #007bff;
            margin-top: 0;
        }
        .toc ul {
            list-style: none;
            padding-left: 0;
        }
        .toc li {
            margin: 8px 0;
        }
        .toc a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
        }
        .toc a:hover {
            color: #007bff;
        }
        .section {
            margin: 30px 0;
            padding: 20px;
            border-left: 4px solid #007bff;
            background: #f8f9fa;
        }
        .section h2 {
            color: #007bff;
            margin-top: 0;
        }
        .section h3 {
            color: #495057;
            margin-top: 25px;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .feature-card h4 {
            color: #007bff;
            margin-top: 0;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 15px 0;
        }
        .code-block .comment {
            color: #68d391;
        }
        .code-block .keyword {
            color: #f687b3;
        }
        .code-block .string {
            color: #fbb6ce;
        }
        .highlight {
            background: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
        }
        .warning {
            background: #f8d7da;
            padding: 15px;
            border-left: 4px solid #dc3545;
            margin: 15px 0;
        }
        .success {
            background: #d4edda;
            padding: 15px;
            border-left: 4px solid #28a745;
            margin: 15px 0;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-card .number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .stat-card .label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .table th, .table td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: left;
        }
        .table th {
            background: #007bff;
            color: white;
        }
        .table tr:nth-child(even) {
            background: #f8f9fa;
        }
        .footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 2px solid #dee2e6;
            color: #666;
        }
        @media print {
            body { background: white; }
            .container { box-shadow: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Sistem Kehadiran RFID Enterprise</h1>
            <div class="subtitle">Panduan Lengkap Implementasi & Penggunaan</div>
            <div class="version">Versi 2.0.0</div>
        </div>

        <div class="section" id="quickstart">
            <h2>üöÄ Quickstart 10 Langkah (Paling Mudah untuk Pemula)</h2>
            <ol>
                <li>Install Laragon ‚Üí Start All (Apache & MySQL hijau).</li>
                <li>Salin folder project ke <code>C:\laragon\www\attendance</code> (atau clone Git).</li>
                <li>Buat DB: buka MySQL Terminal ‚Üí <code>CREATE DATABASE attendance;</code></li>
                <li>Import skema: <code>web/sql/schema.sql</code> lalu <code>web/sql/essential_tables.sql</code>.</li>
                <li>Buka <code>attendance/web/config.php</code> ‚Üí pastikan DB_NAME=attendance, APP_TZ Asia/Jakarta.</li>
                <li>Pastikan web bisa diakses dari HP: dari HP buka <code>http://&lt;IP_PC&gt;/attendance/web/api/device_config.php</code> ‚Üí harus tampil JSON.</li>
                <li>Firmware: edit <code>firmware/attendance_esp32/config.h</code>:
                    <div class="code-block">
<span class="keyword">#define</span> WIFI_SSID <span class="string">"NamaWiFiAnda"</span>
<span class="keyword">#define</span> WIFI_PASS <span class="string">"PasswordWiFiAnda"</span>
<span class="keyword">#define</span> API_BASE <span class="string">"http://&lt;IP_PC&gt;/attendance/web/api"</span>
<span class="keyword">#define</span> DEVICE_ID <span class="string">"DEVICE-01"</span>
<span class="keyword">#define</span> DEVICE_SECRET <span class="string">"secret-kuat"</span>
                    </div>
                </li>
                <li>DB devices: samakan secret:
                    <div class="code-block">
INSERT INTO devices (id, device_secret, is_active)
VALUES ('DEVICE-01', 'secret-kuat', 1)
ON DUPLICATE KEY UPDATE device_secret=VALUES(device_secret), is_active=VALUES(is_active);
                    </div>
                </li>
                <li>Upload firmware ‚Üí tekan tombol EN/RESET pada ESP32 untuk reboot.</li>
                <li>Daftar via scan (Opsi B, disarankan): buka <code>attendance/web/public/register.php</code> (biarkan terbuka) ‚Üí scan kartu ‚Üí pilih UID di daftar kanan ‚Üí isi Nama/Kelas ‚Üí Simpan.</li>
                <li>Jika tes saat Sabtu/Minggu, di <code>attendance/web/config.php</code> set: <code>'ALLOW_WEEKEND_HOLIDAY_SCAN' =&gt; true</code>.</li>
            </ol>
            <div class="success"><strong>Checklist sukses:</strong> HP bisa buka <code>device_config.php</code>, Serial Monitor tidak menampilkan 401/404, halaman Register menampilkan UID Unknown saat scan.</div>
        </div>

        <div class="toc">
            <h2>üìã Daftar Isi</h2>
            <ul>
                <li><a href="#beginner">0. Panduan Pemula (MULAI DARI SINI!)</a></li>
                <li><a href="#overview">1. Overview Sistem</a></li>
                <li><a href="#features">2. Fitur Utama</a></li>
                <li><a href="#installation">3. Instalasi & Setup</a></li>
                <li><a href="#hardware">4. Hardware & Wiring</a></li>
                <li><a href="#software">5. Software Configuration</a></li>
                <li><a href="#usage">6. Cara Penggunaan</a></li>
                <li><a href="#database">7. Struktur Database</a></li>
                <li><a href="#api">8. API Documentation</a></li>
                <li><a href="#troubleshooting">9. Troubleshooting</a></li>
                <li><a href="#maintenance">10. Maintenance & Backup</a></li>
                <li><a href="#security">11. Security & Best Practices</a></li>
                <li><a href="#support">12. Support & Contact</a></li>
            </ul>
        </div>

        <div class="section" id="beginner">
            <h2>0. üöÄ Panduan Pemula (MULAI DARI SINI!)</h2>

            <div class="warning">
                <strong>üéØ BACA DULU SEBELUM MEMULAI!</strong><br>
                Jika Anda baru pertama kali menggunakan sistem ini, ikuti panduan langkah demi langkah di bawah ini. Panduan ini dibuat khusus untuk pemula yang belum pernah menginstall sistem RFID sebelumnya.
            </div>

            <h3>üìã Daftar Periksa Sebelum Mulai</h3>
            <div class="highlight">
                <strong>‚úÖ Yang Perlu Anda Siapkan:</strong>
                <ul>
                    <li>Komputer dengan Windows 10/11</li>
                    <li>ESP32 DevKit v1 (bukan ESP32-S2 atau yang lain)</li>
                    <li>Modul RFID RC522</li>
                    <li>Kartu RFID/Mifare (minimal 1 buah untuk testing)</li>
                    <li>Kabel jumper male-to-male (minimal 10 buah)</li>
                    <li>Breadboard</li>
                    <li>Power supply 5V untuk ESP32</li>
                    <li>Arduino IDE atau PlatformIO (untuk upload firmware)</li>
                    <li>‚úÖ OLED Display 0.96" I2C (untuk tampilan realtime)</li>
                    <li>‚úÖ RTC DS3231 Module (untuk sinkronisasi waktu akurat)</li>
                </ul>
            </div>

            <h3>üî¢ Langkah 1: Install Laragon (Server)</h3>
            <div class="success">
                <strong>üéØ Tujuan:</strong> Menjalankan server web dan database MySQL di komputer Anda
            </div>

            <ol>
                <li><strong>Download Laragon:</strong>
                    <ul>
                        <li>Buka browser dan kunjungi: <code>https://laragon.org/download/</code></li>
                        <li>Download versi Full (bukan Portable)</li>
                        <li>Install Laragon di folder default (C:\laragon)</li>
                    </ul>
                </li>

                <li><strong>Jalankan Laragon:</strong>
                    <ul>
                        <li>Buka aplikasi Laragon</li>
                        <li>Klik tombol "Start All" (ikon play hijau)</li>
                        <li>Tunggu hingga Apache dan MySQL berjalan (ikon hijau)</li>
                    </ul>
                </li>

                <li><strong>Test Server:</strong>
                    <ul>
                        <li>Buka browser: <code>http://localhost</code></li>
                        <li>Anda akan melihat halaman welcome Laragon</li>
                    </ul>
                </li>
            </ol>

            <h3>üî¢ Langkah 2: Download & Setup Project</h3>
            <div class="success">
                <strong>üéØ Tujuan:</strong> Mendapatkan semua file sistem kehadiran
            </div>

            <ol>
                <li><strong>Clone Repository:</strong>
                    <div class="code-block">
# Buka Command Prompt atau Terminal
cd C:\laragon\www
git clone https://github.com/Anamsyahrul/attendance.git
cd attendance
                    </div>
                </li>

                <li><strong>Import Database:</strong>
                    <div class="code-block">
# Di Laragon, klik kanan ‚Üí MySQL ‚Üí Terminal
mysql -u root -p
# Password kosong, tekan Enter

# Di dalam MySQL:
CREATE DATABASE attendance;
exit;

# Import schema
mysql -u root attendance < web\sql\schema.sql
mysql -u root attendance < web\sql\essential_tables.sql
                    </div>
                </li>

                <li><strong>Test Web App:</strong>
                    <ul>
                        <li>Buka browser: <code>http://localhost/attendance/login.php</code></li>
                        <li>Login dengan: <strong>admin / admin</strong></li>
                        <li>Anda akan masuk ke dashboard admin</li>
                    </ul>
                </li>
            </ol>

            <h3>üî¢ Langkah 3: Persiapan Hardware (ESP32 + RFID)</h3>
            <div class="success">
                <strong>üéØ Tujuan:</strong> Merakit perangkat RFID yang akan membaca kartu kehadiran
            </div>

            <h4>3.1. Komponen yang Dibutuhkan:</h4>
            <table class="table">
                <tr>
                    <th>Komponen</th>
                    <th>Jumlah</th>
                    <th>Catatan</th>
                </tr>
                <tr>
                    <td>ESP32 DevKit v1</td>
                    <td>1</td>
                    <td>Pastikan yang ada WiFi dan Bluetooth</td>
                </tr>
                <tr>
                    <td>RC522 RFID Module</td>
                    <td>1</td>
                    <td>Modul pembaca kartu RFID</td>
                </tr>
                <tr>
                    <td>Kartu RFID/Mifare</td>
                    <td>1-5</td>
                    <td>Untuk testing kehadiran</td>
                </tr>
                <tr>
                    <td>Kabel Jumper</td>
                    <td>10+</td>
                    <td>Male-to-male</td>
                </tr>
                <tr>
                    <td>Breadboard</td>
                    <td>1</td>
                    <td>Untuk prototyping</td>
                </tr>
                <tr>
                    <td>Power Supply 5V</td>
                    <td>1</td>
                    <td>Minimal 1A output</td>
                </tr>
                <tr>
                    <td>OLED Display 0.96" I2C</td>
                    <td>1</td>
                    <td>Menampilkan informasi kehadiran realtime</td>
                </tr>
                <tr>
                    <td>RTC DS3231 Module</td>
                    <td>1</td>
                    <td>Modul jam real-time untuk sinkronisasi waktu akurat</td>
                </tr>
            </table>

            <h4>3.2. Panduan Wiring (Sambung Kabel):</h4>
            <div class="warning">
                <strong>‚ö†Ô∏è PENTING:</strong> Matikan semua power sebelum mulai wiring! Pastikan semua komponen tidak tersambung ke listrik.
            </div>

            <div class="success">
                <strong>‚úÖ Langkah Wiring Sederhana:</strong>
                <ol>
                    <li><strong>Siapkan Komponen:</strong>
                        <ul>
                            <li>ESP32 DevKit v1</li>
                            <li>Modul RC522 RFID</li>
                            <li>Breadboard</li>
                            <li>Kabel jumper (male-to-male)</li>
                        </ul>
                    </li>

                    <li><strong>Sambungkan RC522 ke ESP32:</strong>
                        <div class="highlight">
                            <strong>üîå Koneksi Wajib (8 kabel):</strong>
                            <table class="table">
                                <tr>
                                    <th>RC522 Pin</th>
                                    <th>ESP32 Pin</th>
                                    <th>Kabel Warna</th>
                                    <th>Keterangan</th>
                                </tr>
                                <tr>
                                    <td>SDA</td>
                                    <td>D5 (GPIO5)</td>
                                    <td>Orange</td>
                                    <td>Data komunikasi</td>
                                </tr>
                                <tr>
                                    <td>SCK</td>
                                    <td>D18 (GPIO18)</td>
                                    <td>Kuning</td>
                                    <td>Clock signal</td>
                                </tr>
                                <tr>
                                    <td>MOSI</td>
                                    <td>D23 (GPIO23)</td>
                                    <td>Biru</td>
                                    <td>Data keluar ESP32</td>
                                </tr>
                                <tr>
                                    <td>MISO</td>
                                    <td>D19 (GPIO19)</td>
                                    <td>Hijau</td>
                                    <td>Data masuk ESP32</td>
                                </tr>
                                <tr>
                                    <td>RST</td>
                                    <td>D27 (GPIO27)</td>
                                    <td>Ungu</td>
                                    <td>Reset RC522</td>
                                </tr>
                                <tr>
                                    <td>3.3V</td>
                                    <td>3V3</td>
                                    <td>Merah</td>
                                    <td>Power 3.3V</td>
                                </tr>
                                <tr>
                                    <td>GND</td>
                                    <td>GND</td>
                                    <td>Hitam</td>
                                    <td>Ground</td>
                                </tr>
                            </table>

                            <div style="margin-top: 15px; padding: 10px; background: #e9ecef; border-radius: 5px;">
                                <strong>üìç Panduan Sambung Breadboard:</strong>
                                <table class="table" style="margin-top: 10px;">
                                    <tr>
                                        <th>Langkah</th>
                                        <th>Cara Sambung</th>
                                    </tr>
                                    <tr>
                                        <td>1. Letakkan ESP32</td>
                                        <td>Masukkan ESP32 ke breadboard (pin sejajar lubang)</td>
                                    </tr>
                                    <tr>
                                        <td>2. Letakkan RC522</td>
                                        <td>Masukkan RC522 di sisi lain breadboard (jarak 2-3 lubang)</td>
                                    </tr>
                                    <tr>
                                        <td>3. Sambungkan</td>
                                        <td>Ikuti tabel di atas: ESP32 Pin ‚Üí RC522 Pin (warna kabel)</td>
                                    </tr>
                                    <tr>
                                        <td>4. Periksa</td>
                                        <td>Pastikan semua kabel tidak longgar, warna sesuai</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </li>

                    <li><strong>Sambungkan Power Supply:</strong>
                        <div class="highlight">
                            <strong>üîã Power Supply (2 kabel):</strong>
                            <ul>
                                <li><strong>Power +5V ‚Üí ESP32 VIN pin</strong> (bukan 3V3!)</li>
                                <li><strong>Power GND ‚Üí ESP32 GND</strong></li>
                            </ul>
                        </div>
                    </li>

                    <li><strong>Periksa Koneksi:</strong>
                        <ul>
                            <li>‚úÖ Semua kabel terpasang dengan benar</li>
                            <li>‚úÖ Tidak ada kabel yang longgar</li>
                            <li>‚úÖ RC522 mendapat 3.3V (bukan 5V)</li>
                            <li>‚úÖ ESP32 VIN mendapat 5V dari power supply</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <h4>3.3. Sambungkan OLED Display 0.96" I2C</h4>
            <div class="success">
                <strong>‚úÖ Koneksi OLED Display (4 kabel):</strong>
                <table class="table">
                    <tr>
                        <th>OLED Pin</th>
                        <th>ESP32 Pin</th>
                        <th>Kabel Warna</th>
                        <th>Keterangan</th>
                    </tr>
                    <tr>
                        <td>VCC</td>
                        <td>3V3</td>
                        <td>Merah</td>
                        <td>Power 3.3V</td>
                    </tr>
                    <tr>
                        <td>GND</td>
                        <td>GND</td>
                        <td>Hitam</td>
                        <td>Ground</td>
                    </tr>
                    <tr>
                        <td>SCL</td>
                        <td>D22 (GPIO22)</td>
                        <td>Kuning</td>
                        <td>I2C Clock</td>
                    </tr>
                    <tr>
                        <td>SDA</td>
                        <td>D21 (GPIO21)</td>
                        <td>Biru</td>
                        <td>I2C Data</td>
                    </tr>
                </table>

                <div style="margin-top: 15px; padding: 10px; background: #e9ecef; border-radius: 5px;">
                    <strong>üìç Cara Sambung OLED:</strong>
                    <ol>
                        <li>Masukkan OLED ke breadboard</li>
                        <li>Sambungkan VCC OLED ke 3V3 ESP32 (kabel merah)</li>
                        <li>Sambungkan GND OLED ke GND ESP32 (kabel hitam)</li>
                        <li>Sambungkan SCL ke GPIO22 (kabel kuning)</li>
                        <li>Sambungkan SDA ke GPIO21 (kabel biru)</li>
                    </ol>
                </div>
            </div>

            <h4>3.4. Sambungkan RTC DS3231 Module</h4>
            <div class="success">
                <strong>‚úÖ Koneksi RTC DS3231 (4 kabel):</strong>
                <table class="table">
                    <tr>
                        <th>RTC Pin</th>
                        <th>ESP32 Pin</th>
                        <th>Kabel Warna</th>
                        <th>Keterangan</th>
                    </tr>
                    <tr>
                        <td>VCC</td>
                        <td>3V3</td>
                        <td>Merah</td>
                        <td>Power 3.3V</td>
                    </tr>
                    <tr>
                        <td>GND</td>
                        <td>GND</td>
                        <td>Hitam</td>
                        <td>Ground</td>
                    </tr>
                    <tr>
                        <td>SCL</td>
                        <td>D22 (GPIO22)</td>
                        <td>Kuning</td>
                        <td>I2C Clock (shared dengan OLED)</td>
                    </tr>
                    <tr>
                        <td>SDA</td>
                        <td>D21 (GPIO21)</td>
                        <td>Biru</td>
                        <td>I2C Data (shared dengan OLED)</td>
                    </tr>
                </table>

                <div style="margin-top: 15px; padding: 10px; background: #e9ecef; border-radius: 5px;">
                    <strong>üìç Cara Sambung RTC:</strong>
                    <ol>
                        <li>Masukkan RTC DS3231 ke breadboard</li>
                        <li>Sambungkan VCC RTC ke 3V3 ESP32 (kabel merah)</li>
                        <li>Sambungkan GND RTC ke GND ESP32 (kabel hitam)</li>
                        <li>Sambungkan SCL ke GPIO22 (kabel kuning - sama dengan OLED)</li>
                        <li>Sambungkan SDA ke GPIO21 (kabel biru - sama dengan OLED)</li>
                    </ol>
                    <strong>‚ö†Ô∏è Catatan:</strong> OLED dan RTC menggunakan I2C bus yang sama (GPIO21/GPIO22), jadi tidak perlu kabel tambahan untuk SCL/SDA.
                </div>
            </div>

            <h3>üî¢ Langkah 4: Upload Firmware ke ESP32</h3>
            <div class="success">
                <strong>üéØ Tujuan:</strong> Memprogram ESP32 agar bisa membaca RFID dan kirim data ke server
            </div>

            <ol>
                <li><strong>Install Arduino IDE:</strong>
                    <ul>
                        <li>Download dari: <code>https://www.arduino.cc/en/software</code></li>
                        <li>Install dengan opsi default</li>
                    </ul>
                </li>

                <li><strong>Setup ESP32 di Arduino IDE:</strong>
                    <ul>
                        <li>Buka Arduino IDE</li>
                        <li>File ‚Üí Preferences ‚Üí Additional Boards Manager URLs</li>
                        <li>Tambahkan: <code>https://dl.espressif.com/dl/package_esp32_index.json</code></li>
                        <li>Tools ‚Üí Board ‚Üí Boards Manager ‚Üí Install "esp32"</li>
                        <li>Tools ‚Üí Board ‚Üí ESP32 Dev Module</li>
                    </ul>
                </li>

                <li><strong>Edit Konfigurasi WiFi:</strong>
                    <div class="code-block">
<span class="comment">// Buka file: firmware/attendance_esp32/config.h</span>
<span class="comment">// Edit bagian WiFi:</span>

#define WIFI_SSID "NamaWiFiAnda"
#define WIFI_PASS "PasswordWiFiAnda"
#define API_BASE "http://192.168.1.100/attendance/api"
#define DEVICE_ID "esp32-01"
#define DEVICE_SECRET "rahasiaunik"
                    </div>
                </li>

                <li><strong>Upload Firmware:</strong>
                    <ul>
                        <li>Buka file: <code>firmware/attendance_esp32/attendance_esp32.ino</code></li>
                        <li>Pilih port ESP32 (Tools ‚Üí Port)</li>
                        <li>Klik tombol Upload (panah kanan)</li>
                        <li>Tunggu hingga "Done uploading"</li>
                    </ul>
                </li>
            </ol>

            <h3>üî¢ Langkah 5: Testing Sistem</h3>
            <div class="success">
                <strong>üéØ Tujuan:</strong> Memastikan semua komponen bekerja dengan baik
            </div>

            <ol>
                <li><strong>Test Web App:</strong>
                    <ul>
                        <li>Buka: <code>http://localhost/attendance/login.php</code></li>
                        <li>Login: admin / admin</li>
                        <li>Cek dashboard menampilkan data</li>
                    </ul>
                </li>

                <li><strong>Test RFID Reader:</strong>
                    <ul>
                        <li>Buka Serial Monitor Arduino IDE</li>
                        <li>Tekan reset di ESP32</li>
                        <li>Lihat log koneksi WiFi</li>
                        <li>Tempelkan kartu RFID ke RC522</li>
                        <li>Lihat UID kartu di Serial Monitor</li>
                    </ul>
                </li>

                <li><strong>Test Kehadiran:</strong>
                    <ul>
                        <li>Login ke web app sebagai admin</li>
                        <li>Buat user test dengan UID kartu RFID</li>
                        <li>Tempelkan kartu ke RC522</li>
                        <li>Cek dashboard apakah kehadiran tercatat</li>
                    </ul>
                </li>

                <li><strong>Test OLED Display:</strong>
                    <ul>
                        <li>Setelah upload firmware, OLED akan menampilkan pesan "Sistem Ready"</li>
                        <li>Saat kartu RFID ditempelkan, OLED akan menampilkan nama pengguna dan waktu</li>
                        <li>Jika OLED tidak menampilkan apa-apa, cek koneksi I2C (GPIO21/GPIO22)</li>
                        <li>Coba ganti alamat I2C jika OLED menggunakan alamat 0x3D bukan 0x3C</li>
                    </ul>
                </li>

                <li><strong>Test RTC DS3231:</strong>
                    <ul>
                        <li>RTC akan otomatis disinkronkan dengan NTP saat ESP32 konek WiFi</li>
                        <li>Cek Serial Monitor untuk log "RTC synced with NTP"</li>
                        <li>Jika waktu tidak akurat, cek koneksi I2C dan pastikan RTC mendapat power</li>
                        <li>RTC akan mempertahankan waktu meski ESP32 restart (backup battery)</li>
                    </ul>
                </li>
            </ol>

            <h3>üî¢ Langkah 6: Troubleshooting Cepat</h3>
            <div class="warning">
                <strong>üö® Jika Ada Masalah:</strong>
            </div>

            <table class="table">
                <tr>
                    <th>Masalah</th>
                    <th>Solusi Cepat</th>
                </tr>
                <tr>
                    <td>ESP32 tidak terdeteksi Arduino IDE</td>
                    <td>Cek driver USB, restart Arduino IDE, ganti kabel USB</td>
                </tr>
                <tr>
                    <td>WiFi tidak konek</td>
                    <td>Cek SSID dan password di config.h, pastikan WiFi 2.4GHz</td>
                </tr>
                <tr>
                    <td>RFID tidak terbaca</td>
                    <td>Cek wiring RC522, pastikan 3.3V, coba kartu RFID lain</td>
                </tr>
                <tr>
                    <td>Web app blank putih</td>
                    <td>Cek Apache/MySQL running di Laragon, cek error log</td>
                </tr>
                <tr>
                    <td>Database error</td>
                    <td>Import ulang schema.sql, cek nama database "attendance"</td>
                </tr>
            </ol>

            <div class="success">
                <strong>üéâ SELAMAT!</strong> Jika semua langkah di atas berhasil, sistem kehadiran RFID Anda sudah siap digunakan. Untuk panduan lebih detail tentang fitur-fitur advanced, lanjutkan membaca bagian berikutnya.
            </div>

            <div class="highlight">
                <strong>üìû Butuh Bantuan?</strong>
                <ul>
                    <li>Email: ppba.1965@gmail.com</li>
                    <li>GitHub Issues: <a href="https://github.com/Anamsyahrul/attendance/issues">Buat Issue Baru</a></li>
                    <li>Forum Diskusi: <a href="https://github.com/Anamsyahrul/attendance/discussions">GitHub Discussions</a></li>
                </ul>
            </div>
        </div>

        <div class="section" id="overview">
            <h2>1. üìñ Overview Sistem</h2>
            <p>Sistem Kehadiran RFID Enterprise adalah solusi lengkap untuk monitoring kehadiran berbasis RFID yang dirancang khusus untuk institusi pendidikan. Sistem ini menggabungkan teknologi ESP32, RFID RC522, dan web application PHP/MySQL untuk memberikan solusi kehadiran yang modern, aman, dan mudah digunakan.</p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="number">202</div>
                    <div class="label">Pengguna Terdaftar</div>
                </div>
                <div class="stat-card">
                    <div class="number">15,691</div>
                    <div class="label">Record Kehadiran</div>
                </div>
                <div class="stat-card">
                    <div class="number">14</div>
                    <div class="label">Tabel Database</div>
                </div>
                <div class="stat-card">
                    <div class="number">10+</div>
                    <div class="label">Fitur Utama</div>
                </div>
            </div>

            <h3>üéØ Tujuan Sistem</h3>
            <ul>
                <li>Mengotomatisasi proses pencatatan kehadiran</li>
                <li>Menyediakan laporan kehadiran yang akurat dan real-time</li>
                <li>Memberikan notifikasi otomatis untuk keterlambatan</li>
                <li>Menyediakan dashboard multi-role untuk berbagai pengguna</li>
                <li>Memastikan keamanan data dengan sistem autentikasi yang robust</li>
            </ul>
        </div>

        <div class="section" id="features">
            <h2>2. üåü Fitur Utama</h2>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üîê Sistem Autentikasi & Keamanan</h4>
                    <ul>
                        <li>Rate Limiting (5 percobaan per 15 menit)</li>
                        <li>Remember Me (30 hari)</li>
                        <li>Session Management & Audit Logging</li>
                        <li>Role-based Access Control</li>
                        <li>IP-based Security</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üîî Sistem Notifikasi Real-time</h4>
                    <ul>
                        <li>Notification Bell di navbar</li>
                        <li>Auto-refresh setiap 30 detik</li>
                        <li>Mark as Read functionality</li>
                        <li>Email & SMS Queue system</li>
                        <li>Role-based Distribution</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üíæ Backup & Recovery System</h4>
                    <ul>
                        <li>Full Database Backup (mysqldump)</li>
                        <li>Configuration Backup</li>
                        <li>Automated Cleanup & Restore</li>
                        <li>Backup Management Interface</li>
                        <li>Retention Policy</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üë• Manajemen Pengguna Lengkap</h4>
                    <ul>
                        <li>CRUD Operations</li>
                        <li>Role Management (Admin, Guru, Orang Tua, Siswa)</li>
                        <li>Advanced Search & Filter</li>
                        <li>Password Reset & User Activation</li>
                        <li>Pagination untuk data besar</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üìä Sistem Laporan Advanced</h4>
                    <ul>
                        <li>Statistics Dashboard (real-time)</li>
                        <li>Interactive Charts (Chart.js)</li>
                        <li>Export PDF/CSV/HTML</li>
                        <li>Monthly Trends & Class Reports</li>
                        <li>Role-based Statistics</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üì± RFID Attendance System</h4>
                    <ul>
                        <li>Advanced Late Detection</li>
                        <li>Holiday & Weekend Detection</li>
                        <li>Automatic Notifications</li>
                        <li>Real-time Processing</li>
                        <li>User Information Enrichment</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="installation">
            <h2>3. üöÄ Instalasi & Setup</h2>
            
            <h3>3.1 Persyaratan Sistem</h3>
            <table class="table">
                <tr>
                    <th>Komponen</th>
                    <th>Minimum</th>
                    <th>Rekomendasi</th>
                </tr>
                <tr>
                    <td>Operating System</td>
                    <td>Windows 10</td>
                    <td>Windows 11</td>
                </tr>
                <tr>
                    <td>PHP</td>
                    <td>8.0</td>
                    <td>8.1+</td>
                </tr>
                <tr>
                    <td>MySQL</td>
                    <td>8.0</td>
                    <td>8.0+</td>
                </tr>
                <tr>
                    <td>RAM</td>
                    <td>4GB</td>
                    <td>8GB+</td>
                </tr>
                <tr>
                    <td>Storage</td>
                    <td>2GB</td>
                    <td>5GB+</td>
                </tr>
            </table>

            <h3>3.2 Setup Server (Laragon)</h3>
            <div class="code-block">
<span class="comment"># 1. Clone repository</span>
git clone https://github.com/Anamsyahrul/attendance.git
cd attendance

<span class="comment"># 2. Start Laragon</span>
<span class="comment"># Buka Laragon dan klik "Start All"</span>

<span class="comment"># 3. Import database</span>
mysql -u root attendance < web/sql/schema.sql
mysql -u root attendance < web/sql/essential_tables.sql

<span class="comment"># 4. Akses sistem</span>
<span class="comment"># Buka: http://localhost/attendance/login.php</span>
<span class="comment"># Login: admin / admin</span>
            </div>

            <h3>3.3 Install wkhtmltopdf (untuk Download PDF)</h3>
            <div class="warning">
                <strong>‚ö†Ô∏è WAJIB:</strong> Install wkhtmltopdf agar fitur download PDF panduan berfungsi dengan baik.
            </div>

            <ol>
                <li><strong>Download wkhtmltopdf:</strong>
                    <ul>
                        <li>Buka browser dan kunjungi: <code>https://wkhtmltopdf.org/downloads.html</code></li>
                        <li>Download versi Windows (64-bit atau 32-bit sesuai sistem Anda)</li>
                        <li>Pilih file installer (.exe)</li>
                    </ul>
                </li>

                <li><strong>Install wkhtmltopdf:</strong>
                    <ul>
                        <li>Jalankan file installer yang sudah didownload</li>
                        <li>Install di folder default (C:\Program Files\wkhtmltopdf)</li>
                        <li>Pastikan opsi "Add wkhtmltopdf to PATH" dicentang</li>
                        <li>Klik Next ‚Üí Install ‚Üí Finish</li>
                    </ul>
                </li>

                <li><strong>Test Instalasi:</strong>
                    <div class="code-block">
<span class="comment"># Buka Command Prompt dan ketik:</span>
wkhtmltopdf --version

<span class="comment"># Jika berhasil, akan muncul versi wkhtmltopdf</span>
<span class="comment"># Contoh output: wkhtmltopdf 0.12.6</span>
                    </div>
                </li>

                <li><strong>Troubleshooting:</strong>
                    <ul>
                        <li>Jika command tidak ditemukan, restart Command Prompt</li>
                        <li>Jika masih error, tambahkan manual ke PATH environment variable</li>
                        <li>Cek folder instalasi: C:\Program Files\wkhtmltopdf\bin</li>
                    </ul>
                </li>
            </ol>

            <h3>3.4 Setup ESP32 Firmware</h3>
            <div class="code-block">
<span class="comment">// Edit config.h</span>
<span class="keyword">#define</span> WIFI_SSID <span class="string">"YourWiFi"</span>
<span class="keyword">#define</span> WIFI_PASS <span class="string">"YourPassword"</span>
<span class="keyword">#define</span> API_BASE <span class="string">"http://192.168.1.10/attendance/web/api"</span>
<span class="keyword">#define</span> DEVICE_ID <span class="string">"esp32-01"</span>
<span class="keyword">#define</span> DEVICE_SECRET <span class="string">"your-secret-key"</span>
            </div>

            <div class="highlight">
                <strong>Contoh nyata (sering dipakai):</strong>
                Jika IP PC Anda <code>192.168.0.106</code> maka:
                <ul>
                    <li><code>API_BASE</code> ‚Üí <code>http://192.168.0.106/attendance/web/api</code></li>
                    <li><code>DEVICE_ID</code> ‚Üí <code>DEVICE-01</code> (harus sama dengan DB)</li>
                    <li><code>DEVICE_SECRET</code> ‚Üí mis. <code>anamganteng123</code> (harus sama dengan DB)</li>
                </ul>
            </div>

            <h3>3.5 Konfigurasi Jaringan & API (Agar HP/ESP32 bisa akses)</h3>
            <div class="highlight">
                <strong>Checklist:</strong>
                <ul>
                    <li>HP, ESP32, dan PC berada pada Wi‚ÄëFi/SSID yang sama (subnet sama, mis. 192.168.0.x)</li>
                    <li>Uji dari HP: buka <code>http://&lt;IP_PC&gt;/attendance/web/api/device_config.php</code> ‚Üí harus tampil JSON</li>
                    <li>Set <code>API_BASE</code> sesuai URL yang bisa diakses HP/ESP32, umumnya: <code>http://&lt;IP_PC&gt;/attendance/web/api</code></li>
                    <li>Windows Firewall: izinkan "Apache HTTP Server (httpd.exe)" untuk Private network atau buka port 80 (TCP)</li>
                    <li>Apache listen di semua interface: <code>Listen 80</code> dan <code>&lt;VirtualHost *:80&gt;</code> dengan <code>Require all granted</code></li>
                </ul>
            </div>

            <h3>3.6 Registrasi Perangkat (devices table)</h3>
            <div class="code-block">
<span class="comment">-- Samakan dengan config.h (DEVICE_ID dan DEVICE_SECRET)</span>
INSERT INTO devices (id, device_secret, is_active)
VALUES ('DEVICE-01', 'your-secret-key', 1)
ON DUPLICATE KEY UPDATE device_secret = VALUES(device_secret), is_active = VALUES(is_active);
            </div>

            <h3>3.7 Aktifkan Mode Pendaftaran (opsi runtime)</h3>
            <ul>
                <li>Buka <code>attendance/web/public/register.php</code> ‚Üí ini otomatis mengaktifkan <em>runtime registration</em>.</li>
                <li>Atau aktifkan toggle "Mode Pendaftaran" di halaman Pengaturan agar selalu ON.</li>
                <li>Atau buat file kosong <code>/register.mode</code> di microSD untuk memaksa reg mode di perangkat.</li>
            </ul>

            <div class="success">
                <strong>‚úÖ Setup Berhasil!</strong> Sistem siap digunakan setelah mengikuti langkah-langkah di atas.
            </div>
        </div>

        <div class="section" id="hardware">
            <h2>4. üîß Hardware & Wiring</h2>

            <h3>4.1 Komponen yang Dibutuhkan</h3>
            <table class="table">
                <tr>
                    <th>Komponen</th>
                    <th>Jumlah</th>
                    <th>Fungsi</th>
                </tr>
                <tr>
                    <td>ESP32 DevKit v1</td>
                    <td>1</td>
                    <td>Microcontroller utama</td>
                </tr>
                <tr>
                    <td>RC522 RFID Reader</td>
                    <td>1</td>
                    <td>Pembaca kartu RFID</td>
                </tr>
                <tr>
                    <td>Modul microSD</td>
                    <td>1</td>
                    <td>Penyimpanan offline</td>
                </tr>
                <tr>
                    <td>Kartu/Tag Mifare</td>
                    <td>10+</td>
                    <td>Kartu kehadiran</td>
                </tr>
                <tr>
                    <td>LED & Buzzer</td>
                    <td>1 set</td>
                    <td>Indikator status</td>
                </tr>
                <tr>
                    <td>Breadboard</td>
                    <td>1</td>
                    <td>Untuk prototyping</td>
                </tr>
                <tr>
                    <td>Kabel jumper</td>
                    <td>20+</td>
                    <td>Koneksi antar komponen</td>
                </tr>
                <tr>
                    <td>Resistor 220Œ©</td>
                    <td>2</td>
                    <td>Untuk LED</td>
                </tr>
                <tr>
                    <td>Power Supply 5V</td>
                    <td>1</td>
                    <td>Sumber daya</td>
                </tr>
            </table>

            <h3>4.2 Panduan Perakitan Kabel untuk Pemula</h3>

            <div class="highlight">
                <strong>üõ†Ô∏è Tips untuk Pemula:</strong>
                <ul>
                    <li>Selalu matikan power sebelum merakit kabel</li>
                    <li>Periksa kembali koneksi sebelum menyalakan</li>
                    <li>Gunakan breadboard untuk prototyping</li>
                    <li>Label setiap kabel dengan warna berbeda</li>
                    <li>Gunakan multimeter untuk memeriksa koneksi</li>
                </ul>
            </div>

            <h4>Langkah 1: Persiapan Komponen</h4>
            <ol>
                <li><strong>Siapkan ESP32:</strong> Pastikan ESP32 dalam kondisi baik, tidak ada kerusakan pin</li>
                <li><strong>Siapkan RC522:</strong> Modul RFID RC522 dengan antena</li>
                <li><strong>Siapkan microSD:</strong> Modul microSD card adapter</li>
                <li><strong>Siapkan LED:</strong> 1 LED hijau dan 1 LED merah (3mm)</li>
                <li><strong>Siapkan Buzzer:</strong> Buzzer aktif 5V</li>
                <li><strong>Siapkan Kabel:</strong> Kabel jumper male-to-male dan male-to-female</li>
            </ol>

            <h4>Langkah 2: Sambungkan RC522 ke ESP32</h4>
            <div class="code-block">
<span class="comment">// Koneksi RC522 ‚Üí ESP32 (8 kabel)</span>
<span class="comment">// Pastikan urutan pin benar!</span>

<span class="comment">RC522 Pin ‚Üí ESP32 Pin ‚Üí Kabel Warna</span>
SDA (Data)  ‚Üí GPIO5     ‚Üí <span style="color:orange">Orange</span>
SCK (Clock) ‚Üí GPIO18    ‚Üí <span style="color:yellow">Yellow</span>
MOSI        ‚Üí GPIO23    ‚Üí <span style="color:blue">Blue</span>
MISO        ‚Üí GPIO19    ‚Üí <span style="color:green">Green</span>
RST (Reset) ‚Üí GPIO27    ‚Üí <span style="color:purple">Purple</span>
3.3V (VCC)  ‚Üí 3V3       ‚Üí <span style="color:red">Red</span>
GND         ‚Üí GND       ‚Üí <span style="color:black">Black</span>
IRQ         ‚Üí (tidak digunakan) ‚Üí <span style="color:gray">Gray</span>
            </div>

            <div class="success">
                <strong>‚úÖ Cara Sambung:</strong>
                <ol>
                    <li>Masukkan ESP32 ke breadboard</li>
                    <li>Masukkan RC522 ke breadboard (pastikan jarak cukup)</li>
                    <li>Sambungkan GND RC522 ke GND ESP32 (kabel hitam)</li>
                    <li>Sambungkan 3.3V RC522 ke 3V3 ESP32 (kabel merah)</li>
                    <li>Sambungkan SDA ke GPIO5 (kabel orange)</li>
                    <li>Sambungkan SCK ke GPIO18 (kabel kuning)</li>
                    <li>Sambungkan MOSI ke GPIO23 (kabel biru)</li>
                    <li>Sambungkan MISO ke GPIO19 (kabel hijau)</li>
                    <li>Sambungkan RST ke GPIO27 (kabel ungu)</li>
                </ol>
            </div>

            <h4>Langkah 3: Sambungkan Modul microSD</h4>
            <div class="code-block">
<span class="comment">// Koneksi microSD ‚Üí ESP32 (6 kabel)</span>
<span class="comment">// SPI pins shared dengan RC522</span>

<span class="comment">microSD Pin ‚Üí ESP32 Pin ‚Üí Kabel Warna</span>
CS (Chip Select) ‚Üí GPIO4     ‚Üí <span style="color:cyan">Cyan</span>
SCK (Clock)      ‚Üí GPIO18    ‚Üí <span style="color:yellow">Yellow (shared)</span>
MOSI (Data In)   ‚Üí GPIO23    ‚Üí <span style="color:blue">Blue (shared)</span>
MISO (Data Out)  ‚Üí GPIO19    ‚Üí <span style="color:green">Green (shared)</span>
VCC (Power)      ‚Üí 3V3       ‚Üí <span style="color:red">Red (shared)</span>
GND              ‚Üí GND       ‚Üí <span style="color:black">Black (shared)</span>
            </div>

            <div class="success">
                <strong>‚úÖ Cara Sambung:</strong>
                <ol>
                    <li>Masukkan modul microSD ke breadboard</li>
                    <li>Sambungkan GND microSD ke GND ESP32 (kabel hitam)</li>
                    <li>Sambungkan VCC microSD ke 3V3 ESP32 (kabel merah)</li>
                    <li>Sambungkan CS ke GPIO4 (kabel cyan)</li>
                    <li>SCK, MOSI, MISO sudah tersambung dari RC522</li>
                </ol>
            </div>

            <h4>Langkah 4: Sambungkan LED dan Buzzer</h4>
            <div class="code-block">
<span class="comment">// Koneksi LED & Buzzer ‚Üí ESP32</span>

<span class="comment">Komponen ‚Üí ESP32 Pin ‚Üí Kabel Warna ‚Üí Resistor</span>
LED Hijau   ‚Üí GPIO25    ‚Üí <span style="color:lime">Lime</span>    ‚Üí 220Œ© ke GND
LED Merah   ‚Üí GPIO26    ‚Üí <span style="color:pink">Pink</span>    ‚Üí 220Œ© ke GND
Buzzer      ‚Üí GPIO15    ‚Üí <span style="color:brown">Brown</span>  ‚Üí Tidak perlu
            </div>

            <div class="success">
                <strong>‚úÖ Cara Sambung LED:</strong>
                <ol>
                    <li>Sambungkan kaki panjang LED (anoda) ke GPIO pin</li>
                    <li>Sambungkan resistor 220Œ© ke kaki pendek LED (katoda)</li>
                    <li>Sambungkan resistor ke GND ESP32</li>
                    <li>LED Hijau: GPIO25 ‚Üí resistor ‚Üí GND</li>
                    <li>LED Merah: GPIO26 ‚Üí resistor ‚Üí GND</li>
                </ol>
            </div>

            <div class="success">
                <strong>‚úÖ Cara Sambung Buzzer:</strong>
                <ol>
                    <li>Sambungkan pin positif buzzer ke GPIO15</li>
                    <li>Sambungkan pin negatif buzzer ke GND</li>
                    <li>Pastikan buzzer aktif (bunyi sendiri saat diberi tegangan)</li>
                </ol>
            </div>

            <h4>Langkah 5: Sambungkan Power Supply</h4>
            <div class="code-block">
<span class="comment">// Power Supply ‚Üí ESP32</span>
<span class="comment">// Gunakan power supply 5V dengan output stabil</span>

<span class="comment">Power Supply ‚Üí ESP32</span>
+5V ‚Üí VIN pin (jangan 3V3!)
GND ‚Üí GND
            </div>

            <div class="warning">
                <strong>‚ö†Ô∏è Penting:</strong>
                <ul>
                    <li>VIN pin ESP32 menerima 5V input</li>
                    <li>RC522 HARUS menggunakan 3.3V, bukan 5V!</li>
                    <li>Jangan balik polaritas (+ ke -)</li>
                    <li>Gunakan power supply yang stabil (minimal 1A)</li>
                </ul>
            </div>

            <h4>Langkah 6: Testing Koneksi</h4>
            <div class="highlight">
                <strong>üß™ Cara Test:</strong>
                <ol>
                    <li>Upload firmware kosong ke ESP32</li>
                    <li>Periksa LED power ESP32 menyala</li>
                    <li>Test LED hijau: upload kode blink GPIO25</li>
                    <li>Test LED merah: upload kode blink GPIO26</li>
                    <li>Test buzzer: upload kode tone GPIO15</li>
                    <li>Test RC522: upload kode RFID scanner</li>
                    <li>Test microSD: upload kode write/read file</li>
                </ol>
            </div>

            <h3>4.3 Diagram Wiring Lengkap</h3>
            <div class="code-block">
<span class="comment">=== DIAGRAM PIN ESP32 DEVKIT V1 ===</span>
<span class="comment">// Pastikan menggunakan ESP32 DevKit v1 (bukan S2/S3)</span>

[ USB ]
3V3   | o    o | EN
GND   | o    o | 36 (VP)
D23   | o    o | 39 (VN)
D22   | o    o | 34
D1    | o    o | 35
D3    | o    o | 32
D21   | o    o | 33
D19   | o    o | 25
D18   | o    o | 26
D5    | o    o | 27
D17   | o    o | 14
D16   | o    o | 12
D4    | o    o | 13
D0    | o    o | GND
D2    | o    o | 15
D15   | o    o | 2
3V3   | o    o | GND
         [ BOOT ]

<span class="comment">=== WIRING DIAGRAM LENGKAP ===</span>
<span class="comment">// Koneksi komponen ke ESP32</span>

<span class="comment">RC522 RFID ‚Üí ESP32</span>
SDA (Data)  ‚Üí D5    (GPIO5)
SCK (Clock) ‚Üí D18   (GPIO18)
MOSI        ‚Üí D23   (GPIO23)
MISO        ‚Üí D19   (GPIO19)
RST (Reset) ‚Üí D27   (GPIO27)
3.3V (VCC)  ‚Üí 3V3
GND         ‚Üí GND

<span class="comment">microSD ‚Üí ESP32</span>
CS (Chip Select) ‚Üí D4    (GPIO4)
SCK (Clock)      ‚Üí D18   (GPIO18) [shared]
MOSI (Data In)   ‚Üí D23   (GPIO23) [shared]
MISO (Data Out)  ‚Üí D19   (GPIO19) [shared]
VCC (Power)      ‚Üí 3V3   [shared]
GND              ‚Üí GND   [shared]

<span class="comment">LED & Buzzer</span>
LED Hijau  ‚Üí D25 (GPIO25) + 220Œ© ‚Üí GND
LED Merah  ‚Üí D26 (GPIO26) + 220Œ© ‚Üí GND
Buzzer     ‚Üí D15 (GPIO15) ‚Üí GND

<span class="comment">Power Supply</span>
+5V ‚Üí VIN pin (penting: bukan 3V3!)
GND ‚Üí GND
            </div>

            <div class="warning">
                <strong>‚ö†Ô∏è Peringatan Penting:</strong>
                <ul>
                    <li>Pastikan menggunakan supply 3.3V untuk RC522, bukan 5V!</li>
                    <li>Jangan sambungkan 5V langsung ke pin ESP32 kecuali VIN</li>
                    <li>Periksa ulang semua koneksi sebelum menyalakan</li>
                    <li>Gunakan resistor untuk LED untuk mencegah kerusakan</li>
                    <li>Pastikan polaritas buzzer benar (+ ke GPIO, - ke GND)</li>
                </ul>
            </div>

            <h3>4.4 Troubleshooting Wiring</h3>
            <table class="table">
                <tr>
                    <th>Masalah</th>
                    <th>Gejala</th>
                    <th>Solusi</th>
                </tr>
                <tr>
                    <td>ESP32 tidak menyala</td>
                    <td>Tidak ada LED power</td>
                    <td>Cek koneksi power supply ke VIN/GND</td>
                </tr>
                <tr>
                    <td>RC522 tidak terdeteksi</td>
                    <td>Serial monitor error</td>
                    <td>Cek koneksi SPI (SCK,MOSI,MISO) dan SDA</td>
                </tr>
                <tr>
                    <td>LED tidak menyala</td>
                    <td>LED mati saat blink</td>
                    <td>Cek resistor 220Œ© dan polaritas LED</td>
                </tr>
                <tr>
                    <td>Buzzer tidak bunyi</td>
                    <td>Tidak ada suara</td>
                    <td>Cek polaritas buzzer dan GPIO pin</td>
                </tr>
                <tr>
                    <td>microSD tidak terdeteksi</td>
                    <td>Write/read gagal</td>
                    <td>Cek koneksi CS pin dan kartu microSD</td>
                </tr>
            </table>
        </div>

        <div class="section" id="software">
            <h2>5. üíª Software Configuration</h2>
            
            <h3>5.1 Konfigurasi Database</h3>
            <div class="code-block">
<span class="comment">// web/config.php</span>
<span class="keyword">'DB_HOST'</span> => <span class="string">'127.0.0.1'</span>,
<span class="keyword">'DB_NAME'</span> => <span class="string">'attendance'</span>,
<span class="keyword">'DB_USER'</span> => <span class="string">'root'</span>,
<span class="keyword">'DB_PASS'</span> => <span class="string">''</span>,
<span class="keyword">'APP_TZ'</span> => <span class="string">'Asia/Jakarta'</span>,
<span class="keyword">'SCHOOL_NAME'</span> => <span class="string">'SMA Bustanul Arifin'</span>,
<span class="keyword">'ADMIN_USER'</span> => <span class="string">'admin'</span>,
<span class="keyword">'ADMIN_PASS'</span> => <span class="string">'admin'</span>,
<span class="keyword">'LATE_THRESHOLD'</span> => <span class="number">15</span>, <span class="comment">// menit</span>
<span class="keyword">'SCHOOL_START'</span> => <span class="string">'07:30'</span>,
            </div>

            <h3>5.2 Konfigurasi ESP32</h3>
            <div class="code-block">
<span class="comment">// firmware/attendance_esp32/config.h</span>
<span class="keyword">#define</span> WIFI_SSID <span class="string">"YourWiFi"</span>
<span class="keyword">#define</span> WIFI_PASS <span class="string">"YourPassword"</span>
<span class="keyword">#define</span> API_BASE <span class="string">"http://192.168.1.10/attendance/web/api"</span>
<span class="keyword">#define</span> DEVICE_ID <span class="string">"esp32-01"</span>
<span class="keyword">#define</span> DEVICE_SECRET <span class="string">"your-secret-key"</span>
<span class="keyword">#define</span> LATE_THRESHOLD <span class="number">15</span> <span class="comment">// menit</span>
            </div>

            <h3>5.3 Mode Pendaftaran & Alur Daftar via Scan (Opsi B)</h3>
            <div class="highlight">
                <strong>Tujuan:</strong> Saat Mode Pendaftaran aktif, scan kartu yang belum terdaftar tetap disimpan (user_id NULL) dan muncul di halaman <code>register.php</code> ‚Üí daftar "UID Belum Terdaftar".
            </div>
            <div class="highlight">
                <strong>Kenapa OLED menulis "Tidak terdaftar"?</strong>
                Firmware mengecek lokal dari <code>/students.csv</code>. Itu wajar jika file tidak berisi UID Anda. Selama reg mode ON, server tetap menyimpan scan unknown (muncul di daftar kanan halaman Register). Setelah Anda simpan sebagai user, scan berikutnya akan tercatat sebagai user tersebut.
            </div>
            <ol>
                <li>Buka <code>attendance/web/public/register.php</code> (tetap terbuka untuk mengaktifkan runtime registration)</li>
                <li>Pastikan <code>device_config.php</code> menampilkan <code>"reg_mode": true</code> saat halaman register terbuka</li>
                <li>Scan kartu di perangkat ‚Üí daftar UID Unknown muncul di sisi kanan</li>
                <li>Klik "Pakai UID" ‚Üí isi Nama dan Kelas ‚Üí Simpan (opsional centang backfill)</li>
            </ol>
            <div class="success">
                <strong>Tips:</strong>
                <ul>
                    <li>Agar weekend/libur tidak memblokir saat pendaftaran, set di <code>web/config.php</code>: <code>'ALLOW_WEEKEND_HOLIDAY_SCAN' =&gt; true</code></li>
                    <li>Jika ingin Mode Pendaftaran selalu ON tanpa membuka register, aktifkan toggle di halaman Pengaturan</li>
                </ul>
            </div>
        </div>

        <div class="section" id="usage">
            <h2>6. üì± Cara Penggunaan</h2>
            
            <h3>6.1 Login Sistem</h3>
            <div class="highlight">
                <strong>URL:</strong> http://localhost/attendance/login.php<br>
                <strong>Admin:</strong> admin / admin
            </div>

            <h3>6.2 Dashboard Admin</h3>
            <ul>
                <li><strong>Dashboard</strong> - Statistik lengkap sistem</li>
                <li><strong>Manajemen Pengguna</strong> - Kelola semua pengguna</li>
                <li><strong>Laporan</strong> - Laporan dengan grafik interaktif</li>
                <li><strong>Backup & Restore</strong> - Kelola backup database</li>
                <li><strong>Pengaturan</strong> - Konfigurasi sistem</li>
            </ul>

            <h3>6.3 Manajemen Pengguna</h3>
            <ol>
                <li>Klik menu "Manajemen Pengguna"</li>
                <li>Klik "Tambah Pengguna" untuk membuat akun baru</li>
                <li>Isi data pengguna (nama, email, role, kelas)</li>
                <li>Klik "Tambah Pengguna" untuk menyimpan</li>
                <li>Gunakan fitur pencarian untuk mencari pengguna</li>
            </ol>

            <h3>6.4 Sistem Laporan</h3>
            <ol>
                <li>Klik menu "Laporan"</li>
                <li>Pilih jenis laporan (Bulanan/Tahunan/Harian)</li>
                <li>Pilih format export (HTML/PDF/CSV)</li>
                <li>Klik "Generate Laporan"</li>
                <li>Download file laporan yang dihasilkan</li>
            </ol>
        </div>

        <div class="section" id="database">
            <h2>7. üóÑÔ∏è Struktur Database</h2>
            
            <h3>7.1 Tabel Utama</h3>
            <table class="table">
                <tr>
                    <th>Tabel</th>
                    <th>Fungsi</th>
                    <th>Record</th>
                </tr>
                <tr>
                    <td>users</td>
                    <td>Data pengguna dengan role-based access</td>
                    <td>202</td>
                </tr>
                <tr>
                    <td>attendance</td>
                    <td>Data kehadiran RFID</td>
                    <td>15,691</td>
                </tr>
                <tr>
                    <td>devices</td>
                    <td>Data perangkat ESP32</td>
                    <td>2</td>
                </tr>
                <tr>
                    <td>settings</td>
                    <td>Konfigurasi sistem</td>
                    <td>1</td>
                </tr>
            </table>

            <h3>7.2 Tabel Advanced</h3>
            <table class="table">
                <tr>
                    <th>Tabel</th>
                    <th>Fungsi</th>
                </tr>
                <tr>
                    <td>remember_tokens</td>
                    <td>Token remember me</td>
                </tr>
                <tr>
                    <td>audit_logs</td>
                    <td>Log audit sistem</td>
                </tr>
                <tr>
                    <td>notifications</td>
                    <td>Sistem notifikasi</td>
                </tr>
                <tr>
                    <td>email_queue</td>
                    <td>Antrian email</td>
                </tr>
                <tr>
                    <td>backup_logs</td>
                    <td>Log backup</td>
                </tr>
                <tr>
                    <td>system_settings</td>
                    <td>Pengaturan sistem</td>
                </tr>
                <tr>
                    <td>attendance_rules</td>
                    <td>Aturan kehadiran</td>
                </tr>
                <tr>
                    <td>holiday_calendar</td>
                    <td>Kalender libur</td>
                </tr>
            </table>
        </div>

        <div class="section" id="api">
            <h2>8. üîå API Documentation</h2>
            
            <h3>8.1 Endpoint Utama</h3>
            <table class="table">
                <tr>
                    <th>Endpoint</th>
                    <th>Method</th>
                    <th>Fungsi</th>
                </tr>
                <tr>
                    <td>/api/ingest.php</td>
                    <td>POST</td>
                    <td>Menerima data kehadiran dari ESP32</td>
                </tr>
                <tr>
                    <td>/api/mark_notification_read.php</td>
                    <td>POST</td>
                    <td>Menandai notifikasi sebagai dibaca</td>
                </tr>
                <tr>
                    <td>/api/get_notification_count.php</td>
                    <td>GET</td>
                    <td>Mendapatkan jumlah notifikasi</td>
                </tr>
                <tr>
                    <td>/api/set_event.php</td>
                    <td>POST</td>
                    <td>Mengatur event kehadiran manual</td>
                </tr>
            </table>

            <h3>8.2 Contoh Request</h3>
            <div class="code-block">
<span class="comment">// POST /api/ingest.php</span>
{
  <span class="string">"device_id"</span>: <span class="string">"esp32-01"</span>,
  <span class="string">"nonce"</span>: <span class="string">"abc123"</span>,
  <span class="string">"ts"</span>: <span class="string">"1717400000"</span>,
  <span class="string">"events"</span>: [{
    <span class="string">"uid"</span>: <span class="string">"04a1b2c3d4"</span>,
    <span class="string">"ts"</span>: <span class="string">"2025-05-01T08:00:00+07:00"</span>
  }],
  <span class="string">"hmac"</span>: <span class="string">"&lt;hmac_hex&gt;"</span>
}
            </div>
        </div>

        <div class="section" id="troubleshooting">
            <h2>9. üõ†Ô∏è Troubleshooting</h2>
            
            <h3>9.1 Masalah Umum</h3>
            <table class="table">
                <tr>
                    <th>Masalah</th>
                    <th>Penyebab</th>
                    <th>Solusi</th>
                </tr>
                <tr>
                    <td>Database tidak terhubung</td>
                    <td>MySQL tidak berjalan</td>
                    <td>Start Laragon/MySQL</td>
                </tr>
                <tr>
                    <td>Login tidak berfungsi</td>
                    <td>Kredensial salah</td>
                    <td>Cek admin / admin</td>
                </tr>
                <tr>
                    <td>RFID tidak terdeteksi</td>
                    <td>Wiring salah</td>
                    <td>Cek koneksi RC522</td>
                </tr>
                <tr>
                    <td>Notifikasi tidak muncul</td>
                    <td>JavaScript disabled</td>
                    <td>Aktifkan JavaScript</td>
                </tr>
            </table>

            <h3>9.2 Log & Debug</h3>
            <ul>
                <li><strong>Audit Logs</strong> - Cek tabel `audit_logs`</li>
                <li><strong>Error Logs</strong> - Cek `storage/logs/`</li>
                <li><strong>Database Logs</strong> - Cek MySQL error log</li>
                <li><strong>PDF Generation Logs</strong> - Cek `web/storage/logs/pdf_generation.log`</li>
                <li><strong>Test Scripts</strong> - Jalankan `test_final_system_check.php`</li>
            </ul>

            <h3>9.3 Troubleshooting PDF Download</h3>
            <div class="warning">
                <strong>üö® Jika PDF Download Tidak Berfungsi:</strong>
            </div>

            <ol>
                <li><strong>Cek Instalasi wkhtmltopdf:</strong>
                    <div class="code-block">
<span class="comment"># Buka Command Prompt dan jalankan:</span>
wkhtmltopdf --version

<span class="comment"># Jika tidak ditemukan, install ulang wkhtmltopdf</span>
<span class="comment"># Pastikan ditambahkan ke PATH environment variable</span>
                    </div>
                </li>

                <li><strong>Cek Log PDF Generation:</strong>
                    <div class="code-block">
<span class="comment"># Buka file log untuk melihat error:</span>
notepad attendance\web\storage\logs\pdf_generation.log

<span class="comment"># Atau gunakan command:</span>
type attendance\web\storage\logs\pdf_generation.log
                    </div>
                </li>

                <li><strong>Test Manual wkhtmltopdf:</strong>
                    <div class="code-block">
<span class="comment"># Test konversi manual:</span>
wkhtmltopdf --page-size A4 --margin-top 20mm --margin-bottom 20mm --margin-left 15mm --margin-right 15mm --encoding UTF-8 "attendance\PANDUAN_LENGKAP_SISTEM_KEHADIRAN_RFID.html" test.pdf

<span class="comment"># Jika berhasil, akan membuat file test.pdf</span>
                    </div>
                </li>

                <li><strong>Common Issues & Solutions:</strong>
                    <table class="table">
                        <tr>
                            <th>Masalah</th>
                            <th>Gejala</th>
                            <th>Solusi</th>
                        </tr>
                        <tr>
                            <td>wkhtmltopdf tidak ditemukan</td>
                            <td>Download redirect ke HTML</td>
                            <td>Install wkhtmltopdf dan tambahkan ke PATH</td>
                        </tr>
                        <tr>
                            <td>Permission denied</td>
                            <td>Log menunjukkan permission error</td>
                            <td>Jalankan command prompt sebagai administrator</td>
                        </tr>
                        <tr>
                            <td>File HTML tidak ditemukan</td>
                            <td>Log: "File HTML tidak ditemukan"</td>
                            <td>Pastikan path file benar di install_guide.php</td>
                        </tr>
                        <tr>
                            <td>wkhtmltopdf crash</td>
                            <td>Log menunjukkan exit code error</td>
                            <td>Cek versi wkhtmltopdf, coba update ke versi terbaru</td>
                        </tr>
                        <tr>
                            <td>PDF kosong/corrupt</td>
                            <td>File PDF tidak bisa dibuka</td>
                            <td>Cek HTML file tidak corrupt, test manual conversion</td>
                        </tr>
                    </table>
                </li>

                <li><strong>Alternative Solutions:</strong>
                    <ul>
                        <li>Gunakan tombol "Print" untuk print ke PDF manual</li>
                        <li>Save as PDF dari browser (Ctrl+P ‚Üí Save as PDF)</li>
                        <li>Gunakan online HTML to PDF converter</li>
                    </ul>
                </li>
            </ol>
        </div>

        <div class="section" id="maintenance">
            <h2>10. üîß Maintenance & Backup</h2>
            
            <h3>10.1 Backup Rutin</h3>
            <ol>
                <li>Klik menu "Backup & Restore"</li>
                <li>Klik "Backup Database Lengkap"</li>
                <li>Tunggu proses backup selesai</li>
                <li>Download file backup yang dihasilkan</li>
            </ol>

            <h3>10.2 Maintenance Database</h3>
            <div class="code-block">
<span class="comment"># Optimize database</span>
OPTIMIZE TABLE users, attendance, devices;

<span class="comment"># Clean old logs</span>
DELETE FROM audit_logs WHERE created_at < DATE_SUB(NOW(), INTERVAL 90 DAY);
DELETE FROM notifications WHERE created_at < DATE_SUB(NOW(), INTERVAL 30 DAY);
            </div>

            <h3>10.3 Monitoring Sistem</h3>
            <ul>
                <li>Monitor penggunaan disk space</li>
                <li>Cek log error secara berkala</li>
                <li>Backup database secara rutin</li>
                <li>Update sistem jika ada versi baru</li>
            </ul>
        </div>

        <div class="section" id="security">
            <h2>11. üîí Security & Best Practices</h2>
            
            <h3>11.1 Keamanan Sistem</h3>
            <ul>
                <li>Gunakan password yang kuat untuk admin</li>
                <li>Aktifkan rate limiting untuk login</li>
                <li>Backup data secara rutin</li>
                <li>Update sistem secara berkala</li>
                <li>Monitor log audit secara rutin</li>
            </ul>

            <h3>11.2 Best Practices</h3>
            <ul>
                <li>Jangan share kredensial admin</li>
                <li>Gunakan HTTPS untuk production</li>
                <li>Backup sebelum update</li>
                <li>Test di environment development dulu</li>
                <li>Dokumentasikan perubahan konfigurasi</li>
            </ul>
        </div>

        <div class="section" id="support">
            <h2>12. üìû Support & Contact</h2>
            
            <h3>12.1 Informasi Kontak</h3>
            <ul>
                <li><strong>Email:</strong> ppba.1965@gmail.com</li>
                <li><strong>GitHub:</strong> <a href="https://github.com/Anamsyahrul/attendance">@Anamsyahrul/attendance</a></li>
                <li><strong>Documentation:</strong> <a href="https://github.com/Anamsyahrul/attendance/wiki">Wiki</a></li>
            </ul>

            <h3>12.2 Laporan Bug</h3>
            <ol>
                <li>Buka GitHub Issues</li>
                <li>Jelaskan masalah yang terjadi</li>
                <li>Sertakan log error jika ada</li>
                <li>Jelaskan langkah reproduksi</li>
                <li>Mention environment yang digunakan</li>
            </ol>

            <h3>12.3 Feature Request</h3>
            <ol>
                <li>Buka GitHub Issues</li>
                <li>Label sebagai "enhancement"</li>
                <li>Jelaskan fitur yang diinginkan</li>
                <li>Berikan use case yang jelas</li>
                <li>Diskusikan dengan developer</li>
            </ol>
        </div>

        <div class="footer">
            <p><strong>üéâ Sistem Kehadiran RFID Enterprise - Sempurna untuk Sekolah Modern! üéâ</strong></p>
            <p>Dokumen ini dibuat secara otomatis pada: <span id="currentDate"></span></p>
            <p>Versi: 2.0.0 | ¬© 2025 Anam Syahrul</p>
        </div>
    </div>

    <script>
        // Set current date
        document.getElementById('currentDate').textContent = new Date().toLocaleDateString('id-ID', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });

        // Smooth scrolling for TOC links
        document.querySelectorAll('.toc a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // PDF download functionality
        function downloadPDF() {
            // Check if we're running on localhost (web server)
            if (window.location.protocol === 'file:') {
                alert('‚ö†Ô∏è PDF Download hanya bisa digunakan melalui web server!\n\nSilakan akses file ini melalui:\nhttp://localhost/attendance/PANDUAN_LENGKAP_SISTEM_KEHADIRAN_RFID.html');
                return;
            }

            // Construct PDF URL based on current location
            let pdfUrl;
            if (window.location.href.includes('/attendance/')) {
                // If accessed through /attendance/ path
                pdfUrl = window.location.origin + '/attendance/web/api/install_guide.php';
            } else {
                // Fallback for other paths
                pdfUrl = window.location.href.replace('PANDUAN_LENGKAP_SISTEM_KEHADIRAN_RFID.html', 'web/api/install_guide.php');
            }

            // Create a temporary link to trigger download
            const link = document.createElement('a');
            link.href = pdfUrl;
            link.target = '_blank';
            link.download = 'Panduan_Lengkap_Sistem_Kehadiran_RFID.pdf';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Print functionality (fallback)
        function printDocument() {
            window.print();
        }

        // Add PDF download button
        const pdfButton = document.createElement('button');
        pdfButton.innerHTML = 'üìÑ Unduh PDF';
        pdfButton.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            z-index: 1000;
            font-weight: bold;
        `;
        pdfButton.onclick = downloadPDF;
        document.body.appendChild(pdfButton);

        // Add print button (secondary option)
        const printButton = document.createElement('button');
        printButton.innerHTML = 'üñ®Ô∏è Print';
        printButton.style.cssText = `
            position: fixed;
            top: 20px;
            right: 140px;
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            z-index: 1000;
        `;
        printButton.onclick = printDocument;
        document.body.appendChild(printButton);
    </script>
</body>
</html>

